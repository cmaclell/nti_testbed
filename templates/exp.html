<!doctype html>
<!-- 
  The exp.html is the main form that
  controls the experiment.

  see comments throughout for advice
-->
<html>

<head>
    <title>Experiment</title>
    <meta charset="utf-8">


    <link rel="Favicon" href="/static/favicon.ico" />

    <!-- libraries used in your experiment 
			psiturk specifically depends on underscore.js, backbone.js and jquery
    	-->
    <script src="/static/lib/jquery-min.js" type="text/javascript">
    </script>
    <script src="/static/lib/jquery-ui.min.js" type="text/javascript">
    </script>
    <script src="/static/lib/underscore-min.js" type="text/javascript">
    </script>
    <script src="/static/lib/backbone-min.js" type="text/javascript">
    </script>
    <script src="/static/lib/d3.v3.min.js" type="text/javascript">
    </script>

    <script type="text/javascript">
        // These fields provided by the psiTurk Server

        var hitId = "{{hitId}}";
        var assignmentId = "{{assignmentId}}";
        var workerId = "{{workerId}}";
        console.log("----------------------")
        console.log(hitId,assignmentId,workerId)
        console.log("----------------------")

        var uniqueId = "{{ uniqueId }}"; // a unique string identifying the worker/task
        var adServerLoc = "{{ adServerLoc }}"; // the location of your ad (so you can send user back at end of experiment)
        var mode = "{{ mode }}";
    </script>

    <!-- utils.js and psiturk.js provide the basic psiturk functionality -->
    <script src="/static/js/utils.js" type="text/javascript">
    </script>
    <script src="/static/js/psiturk.js" type="text/javascript">
    </script>

    <!-- task.js is where you experiment code actually lives 
			for most purposes this is where you want to focus debugging, development, etc...
		-->
    <!-- <script type="text/javascript"
            src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
        -->
    <script type="text/javascript" src="static/js/socket.io.js"></script>
    <script src="/static/js/task.js" type="text/javascript">
    </script>

    <link rel=stylesheet href="/static/css/bootstrap.min.css" type="text/css">
    <link rel=stylesheet href="/static/lib/jquery-ui.min.css" type="text/css">
    <link rel=stylesheet href="/static/css/style.css" type="text/css">
    <link rel="stylesheet" href="/static/css/interface.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
    <noscript>
			<h1>Warning: Javascript seems to be disabled</h1>
			<p>This website requires that Javascript be enabled on your browser.</p>
			<p>Instructions for enabling Javascript in your browser can be found 
               <a href="http://support.google.com/bin/answer.py?hl=en&answer=23852">here</a></p>
		</noscript>

    <div id="waiting">
        <div class="row">
            <!-- <div class="col-xs-2">
               <img id="adlogo" src="{{ server_location }}/static/images/drexel.jpg" alt="SoarTech Logo" />
            </div> -->
            <div>
                <h1>Hello there!</h1>
                <p>We are currently waiting to connect you with another MTurk worker.</p>
                <p>On average, this takes 20-25 minutes. We thank you for your patience for waiting and keeping this window open.</p>
                <p>Note: you may be matched much earlier, so please be attentive to this screen.</p>
                <br>
                <br>
                <div>Approx. Wait time: <strong><span id="time">25:00</span></strong> minutes!</div>
                <br>
                <br>
                <p><i class="fa fa-spinner fa-spin" style="font-size:48px"></i></p>
            </div>

        </div>
    </div>

    <!-- Bootstrap core JS -->
    <script src="/static/js/bootstrap.min.js" charset="utf-8"></script>

</body>
</html>

<script>
    function startTimer(duration, display) {
    var timer = duration, minutes, seconds;
    setInterval(function () {
        minutes = parseInt(timer / 60, 10);
        seconds = parseInt(timer % 60, 10);

        minutes = minutes < 10 ? "0" + minutes : minutes;
        seconds = seconds < 10 ? "0" + seconds : seconds;

        display.textContent = minutes + ":" + seconds;

        if (--timer < 0) {
            timer = duration;
        }
    }, 1000);
}

    window.onload = function () {
        var twentyFiveMins = 60 * 25,
            display = document.querySelector('#time');
        startTimer(twentyFiveMins, display);
    };
</script>
